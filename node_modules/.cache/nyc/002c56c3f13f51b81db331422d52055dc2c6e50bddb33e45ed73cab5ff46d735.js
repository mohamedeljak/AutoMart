"use strict";var cov_2n6jobv55j=function(){var path="/home/mhashim/Desktop/NewWork/AutoMart/src/models/user.js";var hash="13b9560bab349e4fb809eb5c43209006feb23dc6";var global=new Function("return this")();var gcv="__coverage__";var coverageData={path:"/home/mhashim/Desktop/NewWork/AutoMart/src/models/user.js",statementMap:{"0":{start:{line:3,column:0},end:{line:5,column:3}},"1":{start:{line:6,column:0},end:{line:6,column:28}},"2":{start:{line:8,column:14},end:{line:8,column:55}},"3":{start:{line:10,column:12},end:{line:10,column:51}},"4":{start:{line:12,column:20},end:{line:12,column:67}},"5":{start:{line:14,column:39},end:{line:14,column:95}},"6":{start:{line:16,column:50},end:{line:16,column:151}},"7":{start:{line:16,column:92},end:{line:16,column:149}},"8":{start:{line:18,column:44},end:{line:18,column:315}},"9":{start:{line:18,column:57},end:{line:18,column:58}},"10":{start:{line:18,column:102},end:{line:18,column:110}},"11":{start:{line:18,column:112},end:{line:18,column:167}},"12":{start:{line:18,column:168},end:{line:18,column:199}},"13":{start:{line:18,column:200},end:{line:18,column:254}},"14":{start:{line:18,column:227},end:{line:18,column:254}},"15":{start:{line:18,column:255},end:{line:18,column:313}},"16":{start:{line:20,column:62},end:{line:20,column:131}},"17":{start:{line:20,column:78},end:{line:20,column:131}},"18":{start:{line:20,column:132},end:{line:20,column:193}},"19":{start:{line:20,column:149},end:{line:20,column:193}},"20":{start:{line:20,column:194},end:{line:20,column:213}},"21":{start:{line:23,column:10},end:{line:23,column:24}},"22":{start:{line:25,column:11},end:{line:25,column:35}},"23":{start:{line:28,column:10},end:{line:28,column:39}},"24":{start:{line:32,column:0},end:{line:190,column:3}},"25":{start:{line:38,column:4},end:{line:38,column:32}},"26":{start:{line:40,column:4},end:{line:40,column:26}},"27":{start:{line:41,column:4},end:{line:41,column:32}},"28":{start:{line:50,column:2},end:{line:187,column:6}},"29":{start:{line:54,column:18},end:{line:54,column:28}},"30":{start:{line:56,column:18},end:{line:58,column:22}},"31":{start:{line:60,column:26},end:{line:71,column:7}},"32":{start:{line:73,column:6},end:{line:73,column:43}},"33":{start:{line:74,column:6},end:{line:74,column:27}},"34":{start:{line:81,column:6},end:{line:81,column:27}},"35":{start:{line:82,column:6},end:{line:82,column:30}},"36":{start:{line:87,column:23},end:{line:89,column:8}},"37":{start:{line:88,column:8},end:{line:88,column:41}},"38":{start:{line:91,column:6},end:{line:113,column:7}},"39":{start:{line:92,column:20},end:{line:92,column:56}},"40":{start:{line:93,column:8},end:{line:93,column:38}},"41":{start:{line:94,column:28},end:{line:96,column:10}},"42":{start:{line:95,column:10},end:{line:95,column:49}},"43":{start:{line:98,column:8},end:{line:107,column:9}},"44":{start:{line:99,column:10},end:{line:101,column:13}},"45":{start:{line:100,column:12},end:{line:100,column:45}},"46":{start:{line:103,column:10},end:{line:106,column:12}},"47":{start:{line:109,column:8},end:{line:112,column:10}},"48":{start:{line:120,column:6},end:{line:122,column:9}},"49":{start:{line:121,column:8},end:{line:121,column:33}},"50":{start:{line:127,column:6},end:{line:131,column:9}},"51":{start:{line:128,column:8},end:{line:128,column:45}},"52":{start:{line:130,column:8},end:{line:130,column:43}},"53":{start:{line:140,column:6},end:{line:140,column:30}},"54":{start:{line:145,column:6},end:{line:145,column:36}},"55":{start:{line:150,column:6},end:{line:150,column:42}},"56":{start:{line:155,column:6},end:{line:155,column:40}},"57":{start:{line:166,column:23},end:{line:166,column:39}},"58":{start:{line:167,column:18},end:{line:167,column:54}},"59":{start:{line:168,column:6},end:{line:168,column:78}},"60":{start:{line:169,column:6},end:{line:169,column:81}},"61":{start:{line:170,column:6},end:{line:170,column:81}},"62":{start:{line:171,column:6},end:{line:171,column:70}},"63":{start:{line:172,column:6},end:{line:172,column:37}},"64":{start:{line:182,column:23},end:{line:182,column:39}},"65":{start:{line:183,column:18},end:{line:183,column:54}},"66":{start:{line:184,column:6},end:{line:184,column:40}},"67":{start:{line:185,column:6},end:{line:185,column:16}},"68":{start:{line:189,column:2},end:{line:189,column:14}},"69":{start:{line:192,column:15},end:{line:192,column:25}},"70":{start:{line:194,column:0},end:{line:194,column:30}}},fnMap:{"0":{name:"_interopRequireDefault",decl:{start:{line:14,column:9},end:{line:14,column:31}},loc:{start:{line:14,column:37},end:{line:14,column:97}},line:14},"1":{name:"_classCallCheck",decl:{start:{line:16,column:9},end:{line:16,column:24}},loc:{start:{line:16,column:48},end:{line:16,column:153}},line:16},"2":{name:"_defineProperties",decl:{start:{line:18,column:9},end:{line:18,column:26}},loc:{start:{line:18,column:42},end:{line:18,column:317}},line:18},"3":{name:"_createClass",decl:{start:{line:20,column:9},end:{line:20,column:21}},loc:{start:{line:20,column:60},end:{line:20,column:215}},line:20},"4":{name:"(anonymous_4)",decl:{start:{line:32,column:0},end:{line:32,column:1}},loc:{start:{line:32,column:12},end:{line:190,column:1}},line:32},"5":{name:"user",decl:{start:{line:37,column:11},end:{line:37,column:15}},loc:{start:{line:37,column:18},end:{line:42,column:3}},line:37},"6":{name:"create",decl:{start:{line:52,column:20},end:{line:52,column:26}},loc:{start:{line:52,column:33},end:{line:75,column:5}},line:52},"7":{name:"getunsigninuser",decl:{start:{line:80,column:20},end:{line:80,column:35}},loc:{start:{line:80,column:39},end:{line:114,column:5}},line:80},"8":{name:"(anonymous_8)",decl:{start:{line:87,column:45},end:{line:87,column:46}},loc:{start:{line:87,column:64},end:{line:89,column:7}},line:87},"9":{name:"(anonymous_9)",decl:{start:{line:94,column:50},end:{line:94,column:51}},loc:{start:{line:94,column:69},end:{line:96,column:9}},line:94},"10":{name:"(anonymous_10)",decl:{start:{line:99,column:39},end:{line:99,column:40}},loc:{start:{line:99,column:58},end:{line:101,column:11}},line:99},"11":{name:"findOne",decl:{start:{line:119,column:20},end:{line:119,column:27}},loc:{start:{line:119,column:32},end:{line:123,column:5}},line:119},"12":{name:"(anonymous_12)",decl:{start:{line:120,column:35},end:{line:120,column:36}},loc:{start:{line:120,column:54},end:{line:122,column:7}},line:120},"13":{name:"findA1",decl:{start:{line:126,column:20},end:{line:126,column:26}},loc:{start:{line:126,column:46},end:{line:132,column:5}},line:126},"14":{name:"(anonymous_14)",decl:{start:{line:127,column:37},end:{line:127,column:38}},loc:{start:{line:127,column:56},end:{line:129,column:7}},line:127},"15":{name:"(anonymous_15)",decl:{start:{line:129,column:11},end:{line:129,column:12}},loc:{start:{line:129,column:30},end:{line:131,column:7}},line:129},"16":{name:"findAll",decl:{start:{line:139,column:20},end:{line:139,column:27}},loc:{start:{line:139,column:30},end:{line:141,column:5}},line:139},"17":{name:"findAllsigninusers",decl:{start:{line:144,column:20},end:{line:144,column:38}},loc:{start:{line:144,column:41},end:{line:146,column:5}},line:144},"18":{name:"findAllcarsads",decl:{start:{line:149,column:20},end:{line:149,column:34}},loc:{start:{line:149,column:37},end:{line:151,column:5}},line:149},"19":{name:"findAllorders",decl:{start:{line:154,column:20},end:{line:154,column:33}},loc:{start:{line:154,column:36},end:{line:156,column:5}},line:154},"20":{name:"update",decl:{start:{line:165,column:20},end:{line:165,column:26}},loc:{start:{line:165,column:37},end:{line:173,column:5}},line:165},"21":{name:"_delete",decl:{start:{line:181,column:20},end:{line:181,column:27}},loc:{start:{line:181,column:32},end:{line:186,column:5}},line:181}},branchMap:{"0":{loc:{start:{line:14,column:46},end:{line:14,column:94}},type:"cond-expr",locations:[{start:{line:14,column:70},end:{line:14,column:73}},{start:{line:14,column:76},end:{line:14,column:94}}],line:14},"1":{loc:{start:{line:14,column:46},end:{line:14,column:67}},type:"binary-expr",locations:[{start:{line:14,column:46},end:{line:14,column:49}},{start:{line:14,column:53},end:{line:14,column:67}}],line:14},"2":{loc:{start:{line:16,column:50},end:{line:16,column:151}},type:"if",locations:[{start:{line:16,column:50},end:{line:16,column:151}},{start:{line:16,column:50},end:{line:16,column:151}}],line:16},"3":{loc:{start:{line:18,column:136},end:{line:18,column:166}},type:"binary-expr",locations:[{start:{line:18,column:136},end:{line:18,column:157}},{start:{line:18,column:161},end:{line:18,column:166}}],line:18},"4":{loc:{start:{line:18,column:200},end:{line:18,column:254}},type:"if",locations:[{start:{line:18,column:200},end:{line:18,column:254}},{start:{line:18,column:200},end:{line:18,column:254}}],line:18},"5":{loc:{start:{line:20,column:62},end:{line:20,column:131}},type:"if",locations:[{start:{line:20,column:62},end:{line:20,column:131}},{start:{line:20,column:62},end:{line:20,column:131}}],line:20},"6":{loc:{start:{line:20,column:132},end:{line:20,column:193}},type:"if",locations:[{start:{line:20,column:132},end:{line:20,column:193}},{start:{line:20,column:132},end:{line:20,column:193}}],line:20},"7":{loc:{start:{line:91,column:6},end:{line:113,column:7}},type:"if",locations:[{start:{line:91,column:6},end:{line:113,column:7}},{start:{line:91,column:6},end:{line:113,column:7}}],line:91},"8":{loc:{start:{line:98,column:8},end:{line:107,column:9}},type:"if",locations:[{start:{line:98,column:8},end:{line:107,column:9}},{start:{line:98,column:8},end:{line:107,column:9}}],line:98},"9":{loc:{start:{line:98,column:12},end:{line:98,column:104}},type:"binary-expr",locations:[{start:{line:98,column:12},end:{line:98,column:53}},{start:{line:98,column:57},end:{line:98,column:104}}],line:98},"10":{loc:{start:{line:127,column:37},end:{line:131,column:7}},type:"binary-expr",locations:[{start:{line:127,column:37},end:{line:129,column:7}},{start:{line:129,column:11},end:{line:131,column:7}}],line:127},"11":{loc:{start:{line:168,column:40},end:{line:168,column:77}},type:"binary-expr",locations:[{start:{line:168,column:40},end:{line:168,column:55}},{start:{line:168,column:59},end:{line:168,column:77}}],line:168},"12":{loc:{start:{line:169,column:41},end:{line:169,column:80}},type:"binary-expr",locations:[{start:{line:169,column:41},end:{line:169,column:57}},{start:{line:169,column:61},end:{line:169,column:80}}],line:169},"13":{loc:{start:{line:170,column:41},end:{line:170,column:80}},type:"binary-expr",locations:[{start:{line:170,column:41},end:{line:170,column:57}},{start:{line:170,column:61},end:{line:170,column:80}}],line:170}},s:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0,"33":0,"34":0,"35":0,"36":0,"37":0,"38":0,"39":0,"40":0,"41":0,"42":0,"43":0,"44":0,"45":0,"46":0,"47":0,"48":0,"49":0,"50":0,"51":0,"52":0,"53":0,"54":0,"55":0,"56":0,"57":0,"58":0,"59":0,"60":0,"61":0,"62":0,"63":0,"64":0,"65":0,"66":0,"67":0,"68":0,"69":0,"70":0},f:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0},b:{"0":[0,0],"1":[0,0],"2":[0,0],"3":[0,0],"4":[0,0],"5":[0,0],"6":[0,0],"7":[0,0],"8":[0,0],"9":[0,0],"10":[0,0],"11":[0,0],"12":[0,0],"13":[0,0]},_coverageSchema:"43e27e138ebf9cfc5966b082cf9a028302ed4184",hash:"13b9560bab349e4fb809eb5c43209006feb23dc6"};var coverage=global[gcv]||(global[gcv]={});if(coverage[path]&&coverage[path].hash===hash){return coverage[path];}return coverage[path]=coverageData;}();cov_2n6jobv55j.s[0]++;Object.defineProperty(exports,"__esModule",{value:true});cov_2n6jobv55j.s[1]++;exports["default"]=void 0;var _moment=(cov_2n6jobv55j.s[2]++,_interopRequireDefault(require("moment")));var _uuid=(cov_2n6jobv55j.s[3]++,_interopRequireDefault(require("uuid")));var _jsonwebtoken=(cov_2n6jobv55j.s[4]++,_interopRequireDefault(require("jsonwebtoken")));function _interopRequireDefault(obj){cov_2n6jobv55j.f[0]++;cov_2n6jobv55j.s[5]++;return(cov_2n6jobv55j.b[1][0]++,obj)&&(cov_2n6jobv55j.b[1][1]++,obj.__esModule)?(cov_2n6jobv55j.b[0][0]++,obj):(cov_2n6jobv55j.b[0][1]++,{"default":obj});}function _classCallCheck(instance,Constructor){cov_2n6jobv55j.f[1]++;cov_2n6jobv55j.s[6]++;if(!(instance instanceof Constructor)){cov_2n6jobv55j.b[2][0]++;cov_2n6jobv55j.s[7]++;throw new TypeError("Cannot call a class as a function");}else{cov_2n6jobv55j.b[2][1]++;}}function _defineProperties(target,props){cov_2n6jobv55j.f[2]++;cov_2n6jobv55j.s[8]++;for(var i=(cov_2n6jobv55j.s[9]++,0);i<props.length;i++){var descriptor=(cov_2n6jobv55j.s[10]++,props[i]);cov_2n6jobv55j.s[11]++;descriptor.enumerable=(cov_2n6jobv55j.b[3][0]++,descriptor.enumerable)||(cov_2n6jobv55j.b[3][1]++,false);cov_2n6jobv55j.s[12]++;descriptor.configurable=true;cov_2n6jobv55j.s[13]++;if("value"in descriptor){cov_2n6jobv55j.b[4][0]++;cov_2n6jobv55j.s[14]++;descriptor.writable=true;}else{cov_2n6jobv55j.b[4][1]++;}cov_2n6jobv55j.s[15]++;Object.defineProperty(target,descriptor.key,descriptor);}}function _createClass(Constructor,protoProps,staticProps){cov_2n6jobv55j.f[3]++;cov_2n6jobv55j.s[16]++;if(protoProps){cov_2n6jobv55j.b[5][0]++;cov_2n6jobv55j.s[17]++;_defineProperties(Constructor.prototype,protoProps);}else{cov_2n6jobv55j.b[5][1]++;}cov_2n6jobv55j.s[18]++;if(staticProps){cov_2n6jobv55j.b[6][0]++;cov_2n6jobv55j.s[19]++;_defineProperties(Constructor,staticProps);}else{cov_2n6jobv55j.b[6][1]++;}cov_2n6jobv55j.s[20]++;return Constructor;}//import joi  from 'joi';
var Joi=(cov_2n6jobv55j.s[21]++,require('joi'));var JSON=(cov_2n6jobv55j.s[22]++,require('circular-json'));//const key = require('../key');
var key=(cov_2n6jobv55j.s[23]++,require('../middlewares/key'));var user=(/*#__PURE__*/cov_2n6jobv55j.s[24]++,function(){cov_2n6jobv55j.f[4]++;/**
   * class constructor
   * @param {object} data
   */function user(){cov_2n6jobv55j.f[5]++;cov_2n6jobv55j.s[25]++;_classCallCheck(this,user);cov_2n6jobv55j.s[26]++;this.reflections=[];cov_2n6jobv55j.s[27]++;this.reflectionssignin=[];}/**
   * 
   * @returns {object} reflection object
   */ ///////////////////////////////Signup
cov_2n6jobv55j.s[28]++;_createClass(user,[{key:"create",value:function create(data){cov_2n6jobv55j.f[6]++;//const result = Joi.validate({ username: 'abc', birthyear: 1994 }, schema);
var email=(cov_2n6jobv55j.s[29]++,data.email);var token=(cov_2n6jobv55j.s[30]++,_jsonwebtoken["default"].sign({email:email},key.tokenkey));var newReflection=(cov_2n6jobv55j.s[31]++,{id:_uuid["default"].v4(),email:data.email,first_name:data.first_name,last_name:data.last_name,token:token,address:data.address,is_admin:data.is_admin,password:data.password,createdDate:_moment["default"].now(),modifiedDate:_moment["default"].now()});//console.log(newReflection.token)
cov_2n6jobv55j.s[32]++;this.reflections.push(newReflection);cov_2n6jobv55j.s[33]++;return newReflection;}//////////////////////////////////////End signup
///////////////////////////////Signin
},{key:"getunsigninuser",value:function getunsigninuser(q){cov_2n6jobv55j.f[7]++;cov_2n6jobv55j.s[34]++;console.log(q.email);cov_2n6jobv55j.s[35]++;console.log(q.password);//console.log(Object.keys(q).length);
//const reflection = this.findOne(id);
//const index = this.reflections.indexOf(reflection);
//const emailfound = this.reflections.find(reflect => reflect.email === q.email);
var reflection=(cov_2n6jobv55j.s[36]++,this.reflections.find(function(reflect){cov_2n6jobv55j.f[8]++;cov_2n6jobv55j.s[37]++;return reflect.email===q.email;}));cov_2n6jobv55j.s[38]++;if(reflection){cov_2n6jobv55j.b[7][0]++;var index=(cov_2n6jobv55j.s[39]++,this.reflections.indexOf(reflection));cov_2n6jobv55j.s[40]++;console.log("index="+index);var passwordfound=(cov_2n6jobv55j.s[41]++,this.reflections.find(function(reflect){cov_2n6jobv55j.f[9]++;cov_2n6jobv55j.s[42]++;return reflect.password===q.password;}));cov_2n6jobv55j.s[43]++;if((cov_2n6jobv55j.b[9][0]++,this.reflections[index].email===q.email)&&(cov_2n6jobv55j.b[9][1]++,this.reflections[index].password===q.password)){cov_2n6jobv55j.b[8][0]++;cov_2n6jobv55j.s[44]++;return this.reflections.find(function(reflect){cov_2n6jobv55j.f[10]++;cov_2n6jobv55j.s[45]++;return reflect.email===q.email;});}else{cov_2n6jobv55j.b[8][1]++;cov_2n6jobv55j.s[46]++;return{"status":404,"message":"Email or password Wrong"};}}else{cov_2n6jobv55j.b[7][1]++;cov_2n6jobv55j.s[47]++;return{"status":404,"message":"User  not found"};}}//////////////////////////////////////End signin
///////////////////////////////create car post ad
},{key:"findOne",value:function findOne(id){cov_2n6jobv55j.f[11]++;cov_2n6jobv55j.s[48]++;return this.reflections.find(function(reflect){cov_2n6jobv55j.f[12]++;cov_2n6jobv55j.s[49]++;return reflect.id===id;});}},{key:"findA1",value:function findA1(success,lowPoint){cov_2n6jobv55j.f[13]++;cov_2n6jobv55j.s[50]++;return this.reflections.filter((cov_2n6jobv55j.b[10][0]++,function(reflect){cov_2n6jobv55j.f[14]++;cov_2n6jobv55j.s[51]++;return reflect.lowPoint===lowPoint;})&&(cov_2n6jobv55j.b[10][1]++,function(reflect){cov_2n6jobv55j.f[15]++;cov_2n6jobv55j.s[52]++;return reflect.success===success;}));}/**
     * @returns {object} returns all reflections
     */},{key:"findAll",value:function findAll(){cov_2n6jobv55j.f[16]++;cov_2n6jobv55j.s[53]++;return this.reflections;}},{key:"findAllsigninusers",value:function findAllsigninusers(){cov_2n6jobv55j.f[17]++;cov_2n6jobv55j.s[54]++;return this.reflectionssignin;}},{key:"findAllcarsads",value:function findAllcarsads(){cov_2n6jobv55j.f[18]++;cov_2n6jobv55j.s[55]++;return this.reflectionscreatecaradd;}},{key:"findAllorders",value:function findAllorders(){cov_2n6jobv55j.f[19]++;cov_2n6jobv55j.s[56]++;return this.reflectioncreateorder;}/**
     * 
     * @param {uuid} id
     * @param {object} data 
     */},{key:"update",value:function update(id,data){cov_2n6jobv55j.f[20]++;var reflection=(cov_2n6jobv55j.s[57]++,this.findOne(id));var index=(cov_2n6jobv55j.s[58]++,this.reflections.indexOf(reflection));cov_2n6jobv55j.s[59]++;this.reflections[index].success=(cov_2n6jobv55j.b[11][0]++,data['success'])||(cov_2n6jobv55j.b[11][1]++,reflection.success);cov_2n6jobv55j.s[60]++;this.reflections[index].lowPoint=(cov_2n6jobv55j.b[12][0]++,data['lowPoint'])||(cov_2n6jobv55j.b[12][1]++,reflection.lowPoint);cov_2n6jobv55j.s[61]++;this.reflections[index].takeAway=(cov_2n6jobv55j.b[13][0]++,data['takeAway'])||(cov_2n6jobv55j.b[13][1]++,reflection.takeAway);cov_2n6jobv55j.s[62]++;this.reflections[index].modifiedDate=_moment["default"].now();cov_2n6jobv55j.s[63]++;return this.reflections[index];}/**
     * 
     * @param {uuid} id 
     */},{key:"delete",value:function _delete(id){cov_2n6jobv55j.f[21]++;var reflection=(cov_2n6jobv55j.s[64]++,this.findOne(id));var index=(cov_2n6jobv55j.s[65]++,this.reflections.indexOf(reflection));cov_2n6jobv55j.s[66]++;this.reflections.splice(index,1);cov_2n6jobv55j.s[67]++;return{};}}]);cov_2n6jobv55j.s[68]++;return user;}());var _default=(cov_2n6jobv55j.s[69]++,new user());cov_2n6jobv55j.s[70]++;exports["default"]=_default;//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInVzZXIuanMiXSwibmFtZXMiOlsiSm9pIiwicmVxdWlyZSIsIkpTT04iLCJrZXkiLCJ1c2VyIiwicmVmbGVjdGlvbnMiLCJyZWZsZWN0aW9uc3NpZ25pbiIsImRhdGEiLCJlbWFpbCIsInRva2VuIiwiand0Iiwic2lnbiIsInRva2Vua2V5IiwibmV3UmVmbGVjdGlvbiIsImlkIiwidXVpZCIsInY0IiwiZmlyc3RfbmFtZSIsImxhc3RfbmFtZSIsImFkZHJlc3MiLCJpc19hZG1pbiIsInBhc3N3b3JkIiwiY3JlYXRlZERhdGUiLCJtb21lbnQiLCJub3ciLCJtb2RpZmllZERhdGUiLCJwdXNoIiwicSIsImNvbnNvbGUiLCJsb2ciLCJyZWZsZWN0aW9uIiwiZmluZCIsInJlZmxlY3QiLCJpbmRleCIsImluZGV4T2YiLCJwYXNzd29yZGZvdW5kIiwic3VjY2VzcyIsImxvd1BvaW50IiwiZmlsdGVyIiwicmVmbGVjdGlvbnNjcmVhdGVjYXJhZGQiLCJyZWZsZWN0aW9uY3JlYXRlb3JkZXIiLCJmaW5kT25lIiwidGFrZUF3YXkiLCJzcGxpY2UiXSwibWFwcGluZ3MiOiI7Ozs7Ozs7QUFBQTs7QUFDQTs7QUFDQTs7Ozs7Ozs7OztBQUlBO0FBQ0EsSUFBTUEsR0FBRyxHQUFHQyxPQUFPLENBQUMsS0FBRCxDQUFuQjs7QUFDQSxJQUFNQyxJQUFJLEdBQUdELE9BQU8sQ0FBQyxlQUFELENBQXBCLEMsQ0FDQTs7O0FBQ0EsSUFBTUUsR0FBRyxHQUFHRixPQUFPLENBQUMsb0JBQUQsQ0FBbkI7O0lBRU1HLEk7OztBQUNKOzs7O0FBSUEsa0JBQWM7QUFBQTs7QUFDWixTQUFLQyxXQUFMLEdBQW1CLEVBQW5CO0FBQ0EsU0FBS0MsaUJBQUwsR0FBeUIsRUFBekI7QUFDRztBQUNMOzs7O0FBSUE7Ozs7OzJCQUVPQyxJLEVBQU07QUFNWjtBQUVDLFVBQU1DLEtBQUssR0FBRUQsSUFBSSxDQUFDQyxLQUFsQjs7QUFDQSxVQUFNQyxLQUFLLEdBQUdDLHlCQUFJQyxJQUFKLENBQVM7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V0FBTCxDQUFpQjZCLE9BQWpCLENBQXlCSixVQUF6QixDQUFkO0FBQ0EsV0FBS3pCLFdBQUwsQ0FBaUJzQyxNQUFqQixDQUF3QlYsS0FBeEIsRUFBK0IsQ0FBL0I7QUFDQSxhQUFPLEVBQVA7QUFDRDs7Ozs7O2VBRVksSUFBSTdCLElBQUosRSIsInNvdXJjZVJvb3QiOiIvaG9tZS9taGFzaGltL0Rlc2t0b3AvTmV3V29yay9BdXRvTWFydC9zcmMvbW9kZWxzIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IG1vbWVudCBmcm9tICdtb21lbnQnO1xuaW1wb3J0IHV1aWQgZnJvbSAndXVpZCc7XG5pbXBvcnQgand0IGZyb20gJ2pzb253ZWJ0b2tlbic7XG5cblxuXG4vL2ltcG9ydCBqb2kgIGZyb20gJ2pvaSc7XG5jb25zdCBKb2kgPSByZXF1aXJlKCdqb2knKTtcbmNvbnN0IEpTT04gPSByZXF1aXJlKCdjaXJjdWxhci1qc29uJyk7XG4vL2NvbnN0IGtleSA9IHJlcXVpcmUoJy4uL2tleScpO1xuY29uc3Qga2V5ID0gcmVxdWlyZSgnLi4vbWlkZGxld2FyZXMva2V5Jyk7XG5cbmNsYXNzIHVzZXIge1xuICAvKipcbiAgICogY2xhc3MgY29uc3RydWN0b3JcbiAgICogQHBhcmFtIHtvYmplY3R9IGRhdGFcbiAgICovXG4gIGNvbnN0cnVjdG9yKCkge1xuICAgIHRoaXMucmVmbGVjdGlvbnMgPSBbXTtcbiAgICB0aGlzLnJlZmxlY3Rpb25zc2lnbmluID0gW107XG4gICAgICB9XG4gIC8qKlxuICAgKiBcbiAgICogQHJldHVybnMge29iamVjdH0gcmVmbGVjdGlvbiBvYmplY3RcbiAgICovXG4gIC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9TaWdudXBcbiAgXG4gIGNyZWF0ZShkYXRhKSB7XG4gICAgXG4gXG5cbiAgICBcblxuICAgLy9jb25zdCByZXN1bHQgPSBKb2kudmFsaWRhdGUoeyB1c2VybmFtZTogJ2FiYycsIGJpcnRoeWVhcjogMTk5NCB9LCBzY2hlbWEpO1xuICAgIFxuICAgIGNvbnN0IGVtYWlsPSBkYXRhLmVtYWlsO1xuICAgIGNvbnN0IHRva2VuID0gand0LnNpZ24oe2VtYWlsOmVtYWlsfSxrZXkudG9rZW5rZXkpO1xuICAgXG4gIGNvbnN0IG5ld1JlZmxlY3Rpb24gPSB7XG4gICAgICAgICBpZDogdXVpZC52NCgpLFxuICAgICAgICAgZW1haWw6IGRhdGEuZW1haWwgLFxuICAgICAgICAgZmlyc3RfbmFtZTogZGF0YS5maXJzdF9uYW1lLFxuICAgICAgICAgbGFzdF9uYW1lOiBkYXRhLmxhc3RfbmFtZSxcbiAgICAgICAgIHRva2VuIDogdG9rZW4sXG4gICAgICAgICBhZGRyZXNzIDpkYXRhLmFkZHJlc3MgLFxuICAgICAgICAgaXNfYWRtaW4gOiBkYXRhLmlzX2FkbWluICxcbiAgICAgICAgIHBhc3N3b3JkIDogZGF0YS5wYXNzd29yZCxcbiAgICAgICAgIGNyZWF0ZWREYXRlOiBtb21lbnQubm93KCksXG4gICAgICAgICBtb2RpZmllZERhdGU6IG1vbWVudC5ub3coKVxuICAgICAgICAgfTtcbiAgICAgIFxuICAgICAgLy9jb25zb2xlLmxvZyhuZXdSZWZsZWN0aW9uLnRva2VuKVxuICAgIHRoaXMucmVmbGVjdGlvbnMucHVzaChuZXdSZWZsZWN0aW9uKTtcbiAgICByZXR1cm4gbmV3UmVmbGVjdGlvblxuICAgXG4gIFxuICBcbiAgfVxuICAvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL0VuZCBzaWdudXBcbiAgLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1NpZ25pblxuICBnZXR1bnNpZ25pbnVzZXIocSkge1xuICAgIGNvbnNvbGUubG9nKHEuZW1haWwpO1xuICAgIGNvbnNvbGUubG9nKHEucGFzc3dvcmQpO1xuICAgIC8vY29uc29sZS5sb2coT2JqZWN0LmtleXMocSkubGVuZ3RoKTtcbiAgICAvL2NvbnN0IHJlZmxlY3Rpb24gPSB0aGlzLmZpbmRPbmUoaWQpO1xuICAgIC8vY29uc3QgaW5kZXggPSB0aGlzLnJlZmxlY3Rpb25zLmluZGV4T2YocmVmbGVjdGlvbik7XG4gICAvL2NvbnN0IGVtYWlsZm91bmQgPSB0aGlzLnJlZmxlY3Rpb25zLmZpbmQocmVmbGVjdCA9PiByZWZsZWN0LmVtYWlsID09PSBxLmVtYWlsKTtcbiAgICBjb25zdCByZWZsZWN0aW9uID0gdGhpcy5yZWZsZWN0aW9ucy5maW5kKHJlZmxlY3QgPT4gcmVmbGVjdC5lbWFpbCA9PT0gcS5lbWFpbClcbiAgICBpZiAocmVmbGVjdGlvbil7XG4gICAgY29uc3QgaW5kZXggPSB0aGlzLnJlZmxlY3Rpb25zLmluZGV4T2YocmVmbGVjdGlvbik7XG4gICAgY29uc29sZS5sb2coXCJpbmRleD1cIitpbmRleCk7IFxuXG4gICBjb25zdCBwYXNzd29yZGZvdW5kID0gdGhpcy5yZWZsZWN0aW9ucy5maW5kKHJlZmxlY3QgPT4gcmVmbGVjdC5wYXNzd29yZCA9PT0gcS5wYXNzd29yZCk7IFxuICAgaWYgKCh0aGlzLnJlZmxlY3Rpb25zW2luZGV4XS5lbWFpbCA9PT0gcS5lbWFpbCkgJiYgKHRoaXMucmVmbGVjdGlvbnNbaW5kZXhdLnBhc3N3b3JkID09PSBxLnBhc3N3b3JkKSl7XG4gIFxuICAgIHJldHVybiB0aGlzLnJlZmxlY3Rpb25zLmZpbmQocmVmbGVjdCA9PiByZWZsZWN0LmVtYWlsID09PSBxLmVtYWlsKTtcbiAgICB9XG4gICAgZWxzZSB7XG5cbiAgICAgIHJldHVybiB7XCJzdGF0dXNcIjo0MDQgLCBcIm1lc3NhZ2VcIjogXCJFbWFpbCBvciBwYXNzd29yZCBXcm9uZ1wifTsgICAgXG4gICAgXG4gICAgfVxuXG4gIH1cbiAgZWxzZVxuICAgIHsgIHJldHVybiB7XCJzdGF0dXNcIjo0MDQgLCBcIm1lc3NhZ2VcIjogXCJVc2VyICBub3QgZm91bmRcIn07ICAgIH1cbiAgfVxuICAvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL0VuZCBzaWduaW5cbi8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9jcmVhdGUgY2FyIHBvc3QgYWRcbiBcbiAgZmluZE9uZShpZCkge1xuICAgIHJldHVybiB0aGlzLnJlZmxlY3Rpb25zLmZpbmQocmVmbGVjdCA9PiByZWZsZWN0LmlkID09PSBpZCk7XG4gIH1cblxuICBcblxuICBcblxuXG4gIGZpbmRBMShzdWNjZXNzICwgbG93UG9pbnQpIHtcbnJldHVybiB0aGlzLnJlZmxlY3Rpb25zLmZpbHRlcigoIHJlZmxlY3QgPT4gcmVmbGVjdC5sb3dQb2ludCA9PT0gbG93UG9pbnQpICYmIChyZWZsZWN0ID0+IHJlZmxlY3Quc3VjY2VzcyA9PT0gc3VjY2VzcykpO1xuICB9XG5cbiAgXG4gIC8qKlxuICAgKiBAcmV0dXJucyB7b2JqZWN0fSByZXR1cm5zIGFsbCByZWZsZWN0aW9uc1xuICAgKi9cbiAgZmluZEFsbCgpIHtcbiAgICByZXR1cm4gdGhpcy5yZWZsZWN0aW9ucztcbiAgfVxuXG4gIGZpbmRBbGxzaWduaW51c2VycygpIHtcbiAgICByZXR1cm4gdGhpcy5yZWZsZWN0aW9uc3NpZ25pbjtcbiAgfVxuXG4gIGZpbmRBbGxjYXJzYWRzKCkge1xuICAgIHJldHVybiB0aGlzLnJlZmxlY3Rpb25zY3JlYXRlY2FyYWRkO1xuICB9XG5cbiAgZmluZEFsbG9yZGVycygpIHtcbiAgICByZXR1cm4gdGhpcy5yZWZsZWN0aW9uY3JlYXRlb3JkZXI7XG4gIH1cbiAgLyoqXG4gICAqIFxuICAgKiBAcGFyYW0ge3V1aWR9IGlkXG4gICAqIEBwYXJhbSB7b2JqZWN0fSBkYXRhIFxuICAgKi9cbiAgdXBkYXRlKGlkLCBkYXRhKSB7XG4gICAgY29uc3QgcmVmbGVjdGlvbiA9IHRoaXMuZmluZE9uZShpZCk7XG4gICAgY29uc3QgaW5kZXggPSB0aGlzLnJlZmxlY3Rpb25zLmluZGV4T2YocmVmbGVjdGlvbik7XG4gICAgdGhpcy5yZWZsZWN0aW9uc1tpbmRleF0uc3VjY2VzcyA9IGRhdGFbJ3N1Y2Nlc3MnXSB8fCByZWZsZWN0aW9uLnN1Y2Nlc3M7XG4gICAgdGhpcy5yZWZsZWN0aW9uc1tpbmRleF0ubG93UG9pbnQgPSBkYXRhWydsb3dQb2ludCddIHx8IHJlZmxlY3Rpb24ubG93UG9pbnQ7XG4gICAgdGhpcy5yZWZsZWN0aW9uc1tpbmRleF0udGFrZUF3YXkgPSBkYXRhWyd0YWtlQXdheSddIHx8IHJlZmxlY3Rpb24udGFrZUF3YXk7XG4gICAgdGhpcy5yZWZsZWN0aW9uc1tpbmRleF0ubW9kaWZpZWREYXRlID0gbW9tZW50Lm5vdygpXG4gICAgcmV0dXJuIHRoaXMucmVmbGVjdGlvbnNbaW5kZXhdO1xuICB9XG5cbiAgXG4gXG4gIFxuXG4gIC8qKlxuICAgKiBcbiAgICogQHBhcmFtIHt1dWlkfSBpZCBcbiAgICovXG5cbiAgIFxuICBkZWxldGUoaWQpIHtcbiAgICBjb25zdCByZWZsZWN0aW9uID0gdGhpcy5maW5kT25lKGlkKTtcbiAgICBjb25zdCBpbmRleCA9IHRoaXMucmVmbGVjdGlvbnMuaW5kZXhPZihyZWZsZWN0aW9uKTtcbiAgICB0aGlzLnJlZmxlY3Rpb25zLnNwbGljZShpbmRleCwgMSk7XG4gICAgcmV0dXJuIHt9O1xuICB9XG59XG5leHBvcnQgZGVmYXVsdCBuZXcgdXNlcigpOyJdfQ==