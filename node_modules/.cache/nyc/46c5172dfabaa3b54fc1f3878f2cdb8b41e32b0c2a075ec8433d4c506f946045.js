"use strict";var cov_2n6jobv55j=function(){var path="/home/mhashim/Desktop/NewWork/AutoMart/src/models/user.js";var hash="471fce05886a67e144cbcf76483272460e925f08";var global=new Function("return this")();var gcv="__coverage__";var coverageData={path:"/home/mhashim/Desktop/NewWork/AutoMart/src/models/user.js",statementMap:{"0":{start:{line:3,column:0},end:{line:5,column:3}},"1":{start:{line:6,column:0},end:{line:6,column:25}},"2":{start:{line:8,column:14},end:{line:8,column:55}},"3":{start:{line:10,column:12},end:{line:10,column:51}},"4":{start:{line:12,column:20},end:{line:12,column:67}},"5":{start:{line:14,column:39},end:{line:14,column:93}},"6":{start:{line:17,column:12},end:{line:17,column:26}},"7":{start:{line:19,column:13},end:{line:19,column:37}},"8":{start:{line:22,column:12},end:{line:22,column:41}},"9":{start:{line:30,column:4},end:{line:30,column:26}},"10":{start:{line:31,column:4},end:{line:31,column:32}},"11":{start:{line:42,column:18},end:{line:42,column:28}},"12":{start:{line:44,column:18},end:{line:46,column:20}},"13":{start:{line:48,column:26},end:{line:59,column:5}},"14":{start:{line:61,column:4},end:{line:61,column:41}},"15":{start:{line:62,column:4},end:{line:62,column:25}},"16":{start:{line:68,column:4},end:{line:68,column:25}},"17":{start:{line:69,column:4},end:{line:69,column:28}},"18":{start:{line:74,column:23},end:{line:74,column:82}},"19":{start:{line:74,column:56},end:{line:74,column:81}},"20":{start:{line:76,column:4},end:{line:94,column:5}},"21":{start:{line:77,column:20},end:{line:77,column:56}},"22":{start:{line:78,column:6},end:{line:78,column:36}},"23":{start:{line:79,column:28},end:{line:79,column:93}},"24":{start:{line:79,column:61},end:{line:79,column:92}},"25":{start:{line:81,column:6},end:{line:88,column:7}},"26":{start:{line:82,column:8},end:{line:82,column:75}},"27":{start:{line:82,column:48},end:{line:82,column:73}},"28":{start:{line:84,column:8},end:{line:87,column:10}},"29":{start:{line:90,column:6},end:{line:93,column:8}},"30":{start:{line:100,column:4},end:{line:100,column:63}},"31":{start:{line:100,column:44},end:{line:100,column:61}},"32":{start:{line:104,column:4},end:{line:104,column:123}},"33":{start:{line:104,column:47},end:{line:104,column:76}},"34":{start:{line:104,column:93},end:{line:104,column:120}},"35":{start:{line:112,column:4},end:{line:112,column:28}},"36":{start:{line:116,column:4},end:{line:116,column:34}},"37":{start:{line:120,column:4},end:{line:120,column:40}},"38":{start:{line:124,column:4},end:{line:124,column:38}},"39":{start:{line:134,column:23},end:{line:134,column:39}},"40":{start:{line:135,column:18},end:{line:135,column:54}},"41":{start:{line:136,column:4},end:{line:136,column:76}},"42":{start:{line:137,column:4},end:{line:137,column:79}},"43":{start:{line:138,column:4},end:{line:138,column:79}},"44":{start:{line:139,column:4},end:{line:139,column:65}},"45":{start:{line:140,column:4},end:{line:140,column:35}},"46":{start:{line:149,column:23},end:{line:149,column:39}},"47":{start:{line:150,column:18},end:{line:150,column:54}},"48":{start:{line:151,column:4},end:{line:151,column:38}},"49":{start:{line:152,column:4},end:{line:152,column:14}},"50":{start:{line:157,column:15},end:{line:157,column:25}},"51":{start:{line:159,column:0},end:{line:159,column:27}}},fnMap:{"0":{name:"_interopRequireDefault",decl:{start:{line:14,column:9},end:{line:14,column:31}},loc:{start:{line:14,column:37},end:{line:14,column:95}},line:14},"1":{name:"(anonymous_1)",decl:{start:{line:29,column:2},end:{line:29,column:3}},loc:{start:{line:29,column:16},end:{line:32,column:3}},line:29},"2":{name:"(anonymous_2)",decl:{start:{line:40,column:2},end:{line:40,column:3}},loc:{start:{line:40,column:15},end:{line:63,column:3}},line:40},"3":{name:"(anonymous_3)",decl:{start:{line:67,column:2},end:{line:67,column:3}},loc:{start:{line:67,column:21},end:{line:95,column:3}},line:67},"4":{name:"(anonymous_4)",decl:{start:{line:74,column:45},end:{line:74,column:46}},loc:{start:{line:74,column:56},end:{line:74,column:81}},line:74},"5":{name:"(anonymous_5)",decl:{start:{line:79,column:50},end:{line:79,column:51}},loc:{start:{line:79,column:61},end:{line:79,column:92}},line:79},"6":{name:"(anonymous_6)",decl:{start:{line:82,column:37},end:{line:82,column:38}},loc:{start:{line:82,column:48},end:{line:82,column:73}},line:82},"7":{name:"(anonymous_7)",decl:{start:{line:99,column:2},end:{line:99,column:3}},loc:{start:{line:99,column:14},end:{line:101,column:3}},line:99},"8":{name:"(anonymous_8)",decl:{start:{line:100,column:33},end:{line:100,column:34}},loc:{start:{line:100,column:44},end:{line:100,column:61}},line:100},"9":{name:"(anonymous_9)",decl:{start:{line:103,column:2},end:{line:103,column:3}},loc:{start:{line:103,column:28},end:{line:105,column:3}},line:103},"10":{name:"(anonymous_10)",decl:{start:{line:104,column:36},end:{line:104,column:37}},loc:{start:{line:104,column:47},end:{line:104,column:76}},line:104},"11":{name:"(anonymous_11)",decl:{start:{line:104,column:82},end:{line:104,column:83}},loc:{start:{line:104,column:93},end:{line:104,column:120}},line:104},"12":{name:"(anonymous_12)",decl:{start:{line:111,column:2},end:{line:111,column:3}},loc:{start:{line:111,column:12},end:{line:113,column:3}},line:111},"13":{name:"(anonymous_13)",decl:{start:{line:115,column:2},end:{line:115,column:3}},loc:{start:{line:115,column:23},end:{line:117,column:3}},line:115},"14":{name:"(anonymous_14)",decl:{start:{line:119,column:2},end:{line:119,column:3}},loc:{start:{line:119,column:19},end:{line:121,column:3}},line:119},"15":{name:"(anonymous_15)",decl:{start:{line:123,column:2},end:{line:123,column:3}},loc:{start:{line:123,column:18},end:{line:125,column:3}},line:123},"16":{name:"(anonymous_16)",decl:{start:{line:133,column:2},end:{line:133,column:3}},loc:{start:{line:133,column:19},end:{line:141,column:3}},line:133},"17":{name:"(anonymous_17)",decl:{start:{line:148,column:2},end:{line:148,column:3}},loc:{start:{line:148,column:13},end:{line:153,column:3}},line:148}},branchMap:{"0":{loc:{start:{line:14,column:46},end:{line:14,column:92}},type:"cond-expr",locations:[{start:{line:14,column:70},end:{line:14,column:73}},{start:{line:14,column:76},end:{line:14,column:92}}],line:14},"1":{loc:{start:{line:14,column:46},end:{line:14,column:67}},type:"binary-expr",locations:[{start:{line:14,column:46},end:{line:14,column:49}},{start:{line:14,column:53},end:{line:14,column:67}}],line:14},"2":{loc:{start:{line:76,column:4},end:{line:94,column:5}},type:"if",locations:[{start:{line:76,column:4},end:{line:94,column:5}},{start:{line:76,column:4},end:{line:94,column:5}}],line:76},"3":{loc:{start:{line:81,column:6},end:{line:88,column:7}},type:"if",locations:[{start:{line:81,column:6},end:{line:88,column:7}},{start:{line:81,column:6},end:{line:88,column:7}}],line:81},"4":{loc:{start:{line:81,column:10},end:{line:81,column:102}},type:"binary-expr",locations:[{start:{line:81,column:10},end:{line:81,column:51}},{start:{line:81,column:55},end:{line:81,column:102}}],line:81},"5":{loc:{start:{line:104,column:35},end:{line:104,column:121}},type:"binary-expr",locations:[{start:{line:104,column:36},end:{line:104,column:76}},{start:{line:104,column:82},end:{line:104,column:120}}],line:104},"6":{loc:{start:{line:136,column:38},end:{line:136,column:75}},type:"binary-expr",locations:[{start:{line:136,column:38},end:{line:136,column:53}},{start:{line:136,column:57},end:{line:136,column:75}}],line:136},"7":{loc:{start:{line:137,column:39},end:{line:137,column:78}},type:"binary-expr",locations:[{start:{line:137,column:39},end:{line:137,column:55}},{start:{line:137,column:59},end:{line:137,column:78}}],line:137},"8":{loc:{start:{line:138,column:39},end:{line:138,column:78}},type:"binary-expr",locations:[{start:{line:138,column:39},end:{line:138,column:55}},{start:{line:138,column:59},end:{line:138,column:78}}],line:138}},s:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0,"33":0,"34":0,"35":0,"36":0,"37":0,"38":0,"39":0,"40":0,"41":0,"42":0,"43":0,"44":0,"45":0,"46":0,"47":0,"48":0,"49":0,"50":0,"51":0},f:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0},b:{"0":[0,0],"1":[0,0],"2":[0,0],"3":[0,0],"4":[0,0],"5":[0,0],"6":[0,0],"7":[0,0],"8":[0,0]},_coverageSchema:"43e27e138ebf9cfc5966b082cf9a028302ed4184",hash:"471fce05886a67e144cbcf76483272460e925f08"};var coverage=global[gcv]||(global[gcv]={});if(coverage[path]&&coverage[path].hash===hash){return coverage[path];}return coverage[path]=coverageData;}();cov_2n6jobv55j.s[0]++;Object.defineProperty(exports,"__esModule",{value:true});cov_2n6jobv55j.s[1]++;exports.default=void 0;var _moment=(cov_2n6jobv55j.s[2]++,_interopRequireDefault(require("moment")));var _uuid=(cov_2n6jobv55j.s[3]++,_interopRequireDefault(require("uuid")));var _jsonwebtoken=(cov_2n6jobv55j.s[4]++,_interopRequireDefault(require("jsonwebtoken")));function _interopRequireDefault(obj){cov_2n6jobv55j.f[0]++;cov_2n6jobv55j.s[5]++;return(cov_2n6jobv55j.b[1][0]++,obj)&&(cov_2n6jobv55j.b[1][1]++,obj.__esModule)?(cov_2n6jobv55j.b[0][0]++,obj):(cov_2n6jobv55j.b[0][1]++,{default:obj});}//import joi  from 'joi';
const Joi=(cov_2n6jobv55j.s[6]++,require('joi'));const JSON=(cov_2n6jobv55j.s[7]++,require('circular-json'));//const key = require('../key');
const key=(cov_2n6jobv55j.s[8]++,require('../middlewares/key'));class user{/**
   * class constructor
   * @param {object} data
   */constructor(){cov_2n6jobv55j.f[1]++;cov_2n6jobv55j.s[9]++;this.reflections=[];cov_2n6jobv55j.s[10]++;this.reflectionssignin=[];}/**
   * 
   * @returns {object} reflection object
   */ ///////////////////////////////Signup
create(data){cov_2n6jobv55j.f[2]++;//const result = Joi.validate({ username: 'abc', birthyear: 1994 }, schema);
const email=(cov_2n6jobv55j.s[11]++,data.email);const token=(cov_2n6jobv55j.s[12]++,_jsonwebtoken.default.sign({email:email},key.tokenkey));const newReflection=(cov_2n6jobv55j.s[13]++,{id:_uuid.default.v4(),email:data.email,first_name:data.first_name,last_name:data.last_name,token:token,address:data.address,is_admin:data.is_admin,password:data.password,createdDate:_moment.default.now(),modifiedDate:_moment.default.now()});//console.log(newReflection.token)
cov_2n6jobv55j.s[14]++;this.reflections.push(newReflection);cov_2n6jobv55j.s[15]++;return newReflection;}//////////////////////////////////////End signup
///////////////////////////////Signin
getunsigninuser(q){cov_2n6jobv55j.f[3]++;cov_2n6jobv55j.s[16]++;console.log(q.email);cov_2n6jobv55j.s[17]++;console.log(q.password);//console.log(Object.keys(q).length);
//const reflection = this.findOne(id);
//const index = this.reflections.indexOf(reflection);
//const emailfound = this.reflections.find(reflect => reflect.email === q.email);
const reflection=(cov_2n6jobv55j.s[18]++,this.reflections.find(reflect=>{cov_2n6jobv55j.f[4]++;cov_2n6jobv55j.s[19]++;return reflect.email===q.email;}));cov_2n6jobv55j.s[20]++;if(reflection){cov_2n6jobv55j.b[2][0]++;const index=(cov_2n6jobv55j.s[21]++,this.reflections.indexOf(reflection));cov_2n6jobv55j.s[22]++;console.log("index="+index);const passwordfound=(cov_2n6jobv55j.s[23]++,this.reflections.find(reflect=>{cov_2n6jobv55j.f[5]++;cov_2n6jobv55j.s[24]++;return reflect.password===q.password;}));cov_2n6jobv55j.s[25]++;if((cov_2n6jobv55j.b[4][0]++,this.reflections[index].email===q.email)&&(cov_2n6jobv55j.b[4][1]++,this.reflections[index].password===q.password)){cov_2n6jobv55j.b[3][0]++;cov_2n6jobv55j.s[26]++;return this.reflections.find(reflect=>{cov_2n6jobv55j.f[6]++;cov_2n6jobv55j.s[27]++;return reflect.email===q.email;});}else{cov_2n6jobv55j.b[3][1]++;cov_2n6jobv55j.s[28]++;return{"status":404,"message":"Email or password Wrong"};}}else{cov_2n6jobv55j.b[2][1]++;cov_2n6jobv55j.s[29]++;return{"status":404,"message":"User  not found"};}}//////////////////////////////////////End signin
///////////////////////////////create car post ad
findOne(id){cov_2n6jobv55j.f[7]++;cov_2n6jobv55j.s[30]++;return this.reflections.find(reflect=>{cov_2n6jobv55j.f[8]++;cov_2n6jobv55j.s[31]++;return reflect.id===id;});}findA1(success,lowPoint){cov_2n6jobv55j.f[9]++;cov_2n6jobv55j.s[32]++;return this.reflections.filter((cov_2n6jobv55j.b[5][0]++,reflect=>{cov_2n6jobv55j.f[10]++;cov_2n6jobv55j.s[33]++;return reflect.lowPoint===lowPoint;})&&(cov_2n6jobv55j.b[5][1]++,reflect=>{cov_2n6jobv55j.f[11]++;cov_2n6jobv55j.s[34]++;return reflect.success===success;}));}/**
   * @returns {object} returns all reflections
   */findAll(){cov_2n6jobv55j.f[12]++;cov_2n6jobv55j.s[35]++;return this.reflections;}findAllsigninusers(){cov_2n6jobv55j.f[13]++;cov_2n6jobv55j.s[36]++;return this.reflectionssignin;}findAllcarsads(){cov_2n6jobv55j.f[14]++;cov_2n6jobv55j.s[37]++;return this.reflectionscreatecaradd;}findAllorders(){cov_2n6jobv55j.f[15]++;cov_2n6jobv55j.s[38]++;return this.reflectioncreateorder;}/**
   * 
   * @param {uuid} id
   * @param {object} data 
   */update(id,data){cov_2n6jobv55j.f[16]++;const reflection=(cov_2n6jobv55j.s[39]++,this.findOne(id));const index=(cov_2n6jobv55j.s[40]++,this.reflections.indexOf(reflection));cov_2n6jobv55j.s[41]++;this.reflections[index].success=(cov_2n6jobv55j.b[6][0]++,data['success'])||(cov_2n6jobv55j.b[6][1]++,reflection.success);cov_2n6jobv55j.s[42]++;this.reflections[index].lowPoint=(cov_2n6jobv55j.b[7][0]++,data['lowPoint'])||(cov_2n6jobv55j.b[7][1]++,reflection.lowPoint);cov_2n6jobv55j.s[43]++;this.reflections[index].takeAway=(cov_2n6jobv55j.b[8][0]++,data['takeAway'])||(cov_2n6jobv55j.b[8][1]++,reflection.takeAway);cov_2n6jobv55j.s[44]++;this.reflections[index].modifiedDate=_moment.default.now();cov_2n6jobv55j.s[45]++;return this.reflections[index];}/**
   * 
   * @param {uuid} id 
   */delete(id){cov_2n6jobv55j.f[17]++;const reflection=(cov_2n6jobv55j.s[46]++,this.findOne(id));const index=(cov_2n6jobv55j.s[47]++,this.reflections.indexOf(reflection));cov_2n6jobv55j.s[48]++;this.reflections.splice(index,1);cov_2n6jobv55j.s[49]++;return{};}}var _default=(cov_2n6jobv55j.s[50]++,new user());cov_2n6jobv55j.s[51]++;exports.default=_default;//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInVzZXIuanMiXSwibmFtZXMiOlsiSm9pIiwicmVxdWlyZSIsIkpTT04iLCJrZXkiLCJ1c2VyIiwiY29uc3RydWN0b3IiLCJyZWZsZWN0aW9ucyIsInJlZmxlY3Rpb25zc2lnbmluIiwiY3JlYXRlIiwiZGF0YSIsImVtYWlsIiwidG9rZW4iLCJqd3QiLCJzaWduIiwidG9rZW5rZXkiLCJuZXdSZWZsZWN0aW9uIiwiaWQiLCJ1dWlkIiwidjQiLCJmaXJzdF9uYW1lIiwibGFzdF9uYW1lIiwiYWRkcmVzcyIsImlzX2FkbWluIiwicGFzc3dvcmQiLCJjcmVhdGVkRGF0ZSIsIm1vbWVudCIsIm5vdyIsIm1vZGlmaWVkRGF0ZSIsInB1c2giLCJnZXR1bnNpZ25pbnVzZXIiLCJxIiwiY29uc29sZSIsImxvZyIsInJlZmxlY3Rpb24iLCJmaW5kIiwicmVmbGVjdCIsImluZGV4IiwiaW5kZXhPZiIsInBhc3N3b3JkZm91bmQiLCJmaW5kT25lIiwiZmluZEExIiwic3VjY2VzcyIsImxvd1BvaW50IiwiZmlsdGVyIiwiZmluZEFsbCIsImZpbmRBbGxzaWduaW51c2VycyIsImZpbmRBbGxjYXJzYWRzIiwicmVmbGVjdGlvbnNjcmVhdGVjYXJhZGQiLCJmaW5kQWxsb3JkZXJzIiwicmVmbGVjdGlvbmNyZWF0ZW9yZGVyIiwidXBkYXRlIiwidGFrZUF3YXkiLCJkZWxldGUiLCJzcGxpY2UiXSwibWFwcGluZ3MiOiI7Ozs7Ozs7QUFBQTs7QUFDQTs7QUFDQTs7OztBQUlBO0FBQ0EsTUFBTUEsR0FBRyxHQUFHQyxPQUFPLENBQUMsS0FBRCxDQUFuQjs7QUFDQSxNQUFNQyxJQUFJLEdBQUdELE9BQU8sQ0FBQyxlQUFELENBQXBCLEMsQ0FDQTs7O0FBQ0EsTUFBTUUsR0FBRyxHQUFHRixPQUFPLENBQUMsb0JBQUQsQ0FBbkI7O0FBRUEsTUFBTUcsSUFBTixDQUFXO0FBQ1Q7Ozs7QUFJQUMsRUFBQUEsV0FBVyxHQUFHO0FBQ1osU0FBS0MsV0FBTCxHQUFtQixFQUFuQjtBQUNBLFNB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akIsRUFBd0JULFlBQXhCLEdBQXVDRixnQkFBT0MsR0FBUCxFQUF2QztBQUNBLFdBQU8sS0FBS3BCLFdBQUwsQ0FBaUI4QixLQUFqQixDQUFQO0FBQ0Q7QUFNRDs7Ozs7O0FBTUFnQixFQUFBQSxNQUFNLENBQUNwQyxFQUFELEVBQUs7QUFDVCxVQUFNaUIsVUFBVSxHQUFHLEtBQUtNLE9BQUwsQ0FBYXZCLEVBQWIsQ0FBbkI7QUFDQSxVQUFNb0IsS0FBSyxHQUFHLEtBQUs5QixXQUFMLENBQWlCK0IsT0FBakIsQ0FBeUJKLFVBQXpCLENBQWQ7QUFDQSxTQUFLM0IsV0FBTCxDQUFpQitDLE1BQWpCLENBQXdCakIsS0FBeEIsRUFBK0IsQ0FBL0I7QUFDQSxXQUFPLEVBQVA7QUFDRDs7QUE1SVE7O2VBOElJLElBQUloQyxJQUFKLEUiLCJzb3VyY2VSb290IjoiL2hvbWUvbWhhc2hpbS9EZXNrdG9wL05ld1dvcmsvQXV0b01hcnQvc3JjL21vZGVscyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBtb21lbnQgZnJvbSAnbW9tZW50JztcbmltcG9ydCB1dWlkIGZyb20gJ3V1aWQnO1xuaW1wb3J0IGp3dCBmcm9tICdqc29ud2VidG9rZW4nO1xuXG5cblxuLy9pbXBvcnQgam9pICBmcm9tICdqb2knO1xuY29uc3QgSm9pID0gcmVxdWlyZSgnam9pJyk7XG5jb25zdCBKU09OID0gcmVxdWlyZSgnY2lyY3VsYXItanNvbicpO1xuLy9jb25zdCBrZXkgPSByZXF1aXJlKCcuLi9rZXknKTtcbmNvbnN0IGtleSA9IHJlcXVpcmUoJy4uL21pZGRsZXdhcmVzL2tleScpO1xuXG5jbGFzcyB1c2VyIHtcbiAgLyoqXG4gICAqIGNsYXNzIGNvbnN0cnVjdG9yXG4gICAqIEBwYXJhbSB7b2JqZWN0fSBkYXRhXG4gICAqL1xuICBjb25zdHJ1Y3RvcigpIHtcbiAgICB0aGlzLnJlZmxlY3Rpb25zID0gW107XG4gICAgdGhpcy5yZWZsZWN0aW9uc3NpZ25pbiA9IFtdO1xuICAgICAgfVxuICAvKipcbiAgICogXG4gICAqIEByZXR1cm5zIHtvYmplY3R9IHJlZmxlY3Rpb24gb2JqZWN0XG4gICAqL1xuICAvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vU2lnbnVwXG4gIFxuICBjcmVhdGUoZGF0YSkge1xuICAgIFxuIFxuXG4gICAgXG5cbiAgIC8vY29uc3QgcmVzdWx0ID0gSm9pLnZhbGlkYXRlKHsgdXNlcm5hbWU6ICdhYmMnLCBiaXJ0aHllYXI6IDE5OTQgfSwgc2NoZW1hKTtcbiAgICBcbiAgICBjb25zdCBlbWFpbD0gZGF0YS5lbWFpbDtcbiAgICBjb25zdCB0b2tlbiA9IGp3dC5zaWduKHtlbWFpbDplbWFpbH0sa2V5LnRva2Vua2V5KTtcbiAgIFxuICBjb25zdCBuZXdSZWZsZWN0aW9uID0ge1xuICAgICAgICAgaWQ6IHV1aWQudjQoKSxcbiAgICAgICAgIGVtYWlsOiBkYXRhLmVtYWlsICxcbiAgICAgICAgIGZpcnN0X25hbWU6IGRhdGEuZmlyc3RfbmFtZSxcbiAgICAgICAgIGxhc3RfbmFtZTogZGF0YS5sYXN0X25hbWUsXG4gICAgICAgICB0b2tlbiA6IHRva2VuLFxuICAgICAgICAgYWRkcmVzcyA6ZGF0YS5hZGRyZXNzICxcbiAgICAgICAgIGlzX2FkbWluIDogZGF0YS5pc19hZG1pbiAsXG4gICAgICAgICBwYXNzd29yZCA6IGRhdGEucGFzc3dvcmQsXG4gICAgICAgICBjcmVhdGVkRGF0ZTogbW9tZW50Lm5vdygpLFxuICAgICAgICAgbW9kaWZpZWREYXRlOiBtb21lbnQubm93KClcbiAgICAgICAgIH07XG4gICAgICBcbiAgICAgIC8vY29uc29sZS5sb2cobmV3UmVmbGVjdGlvbi50b2tlbilcbiAgICB0aGlzLnJlZmxlY3Rpb25zLnB1c2gobmV3UmVmbGVjdGlvbik7XG4gICAgcmV0dXJuIG5ld1JlZmxlY3Rpb25cbiAgIFxuICBcbiAgXG4gIH1cbiAgLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9FbmQgc2lnbnVwXG4gIC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9TaWduaW5cbiAgZ2V0dW5zaWduaW51c2VyKHEpIHtcbiAgICBjb25zb2xlLmxvZyhxLmVtYWlsKTtcbiAgICBjb25zb2xlLmxvZyhxLnBhc3N3b3JkKTtcbiAgICAvL2NvbnNvbGUubG9nKE9iamVjdC5rZXlzKHEpLmxlbmd0aCk7XG4gICAgLy9jb25zdCByZWZsZWN0aW9uID0gdGhpcy5maW5kT25lKGlkKTtcbiAgICAvL2NvbnN0IGluZGV4ID0gdGhpcy5yZWZsZWN0aW9ucy5pbmRleE9mKHJlZmxlY3Rpb24pO1xuICAgLy9jb25zdCBlbWFpbGZvdW5kID0gdGhpcy5yZWZsZWN0aW9ucy5maW5kKHJlZmxlY3QgPT4gcmVmbGVjdC5lbWFpbCA9PT0gcS5lbWFpbCk7XG4gICAgY29uc3QgcmVmbGVjdGlvbiA9IHRoaXMucmVmbGVjdGlvbnMuZmluZChyZWZsZWN0ID0+IHJlZmxlY3QuZW1haWwgPT09IHEuZW1haWwpXG4gICAgaWYgKHJlZmxlY3Rpb24pe1xuICAgIGNvbnN0IGluZGV4ID0gdGhpcy5yZWZsZWN0aW9ucy5pbmRleE9mKHJlZmxlY3Rpb24pO1xuICAgIGNvbnNvbGUubG9nKFwiaW5kZXg9XCIraW5kZXgpOyBcblxuICAgY29uc3QgcGFzc3dvcmRmb3VuZCA9IHRoaXMucmVmbGVjdGlvbnMuZmluZChyZWZsZWN0ID0+IHJlZmxlY3QucGFzc3dvcmQgPT09IHEucGFzc3dvcmQpOyBcbiAgIGlmICgodGhpcy5yZWZsZWN0aW9uc1tpbmRleF0uZW1haWwgPT09IHEuZW1haWwpICYmICh0aGlzLnJlZmxlY3Rpb25zW2luZGV4XS5wYXNzd29yZCA9PT0gcS5wYXNzd29yZCkpe1xuICBcbiAgICByZXR1cm4gdGhpcy5yZWZsZWN0aW9ucy5maW5kKHJlZmxlY3QgPT4gcmVmbGVjdC5lbWFpbCA9PT0gcS5lbWFpbCk7XG4gICAgfVxuICAgIGVsc2Uge1xuXG4gICAgICByZXR1cm4ge1wic3RhdHVzXCI6NDA0ICwgXCJtZXNzYWdlXCI6IFwiRW1haWwgb3IgcGFzc3dvcmQgV3JvbmdcIn07ICAgIFxuICAgIFxuICAgIH1cblxuICB9XG4gIGVsc2VcbiAgICB7ICByZXR1cm4ge1wic3RhdHVzXCI6NDA0ICwgXCJtZXNzYWdlXCI6IFwiVXNlciAgbm90IGZvdW5kXCJ9OyAgICB9XG4gIH1cbiAgLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9FbmQgc2lnbmluXG4vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vY3JlYXRlIGNhciBwb3N0IGFkXG4gXG4gIGZpbmRPbmUoaWQpIHtcbiAgICByZXR1cm4gdGhpcy5yZWZsZWN0aW9ucy5maW5kKHJlZmxlY3QgPT4gcmVmbGVjdC5pZCA9PT0gaWQpO1xuICB9XG5cbiAgXG5cbiAgXG5cblxuICBmaW5kQTEoc3VjY2VzcyAsIGxvd1BvaW50KSB7XG5yZXR1cm4gdGhpcy5yZWZsZWN0aW9ucy5maWx0ZXIoKCByZWZsZWN0ID0+IHJlZmxlY3QubG93UG9pbnQgPT09IGxvd1BvaW50KSAmJiAocmVmbGVjdCA9PiByZWZsZWN0LnN1Y2Nlc3MgPT09IHN1Y2Nlc3MpKTtcbiAgfVxuXG4gIFxuICAvKipcbiAgICogQHJldHVybnMge29iamVjdH0gcmV0dXJucyBhbGwgcmVmbGVjdGlvbnNcbiAgICovXG4gIGZpbmRBbGwoKSB7XG4gICAgcmV0dXJuIHRoaXMucmVmbGVjdGlvbnM7XG4gIH1cblxuICBmaW5kQWxsc2lnbmludXNlcnMoKSB7XG4gICAgcmV0dXJuIHRoaXMucmVmbGVjdGlvbnNzaWduaW47XG4gIH1cblxuICBmaW5kQWxsY2Fyc2FkcygpIHtcbiAgICByZXR1cm4gdGhpcy5yZWZsZWN0aW9uc2NyZWF0ZWNhcmFkZDtcbiAgfVxuXG4gIGZpbmRBbGxvcmRlcnMoKSB7XG4gICAgcmV0dXJuIHRoaXMucmVmbGVjdGlvbmNyZWF0ZW9yZGVyO1xuICB9XG4gIC8qKlxuICAgKiBcbiAgICogQHBhcmFtIHt1dWlkfSBpZFxuICAgKiBAcGFyYW0ge29iamVjdH0gZGF0YSBcbiAgICovXG4gIHVwZGF0ZShpZCwgZGF0YSkge1xuICAgIGNvbnN0IHJlZmxlY3Rpb24gPSB0aGlzLmZpbmRPbmUoaWQpO1xuICAgIGNvbnN0IGluZGV4ID0gdGhpcy5yZWZsZWN0aW9ucy5pbmRleE9mKHJlZmxlY3Rpb24pO1xuICAgIHRoaXMucmVmbGVjdGlvbnNbaW5kZXhdLnN1Y2Nlc3MgPSBkYXRhWydzdWNjZXNzJ10gfHwgcmVmbGVjdGlvbi5zdWNjZXNzO1xuICAgIHRoaXMucmVmbGVjdGlvbnNbaW5kZXhdLmxvd1BvaW50ID0gZGF0YVsnbG93UG9pbnQnXSB8fCByZWZsZWN0aW9uLmxvd1BvaW50O1xuICAgIHRoaXMucmVmbGVjdGlvbnNbaW5kZXhdLnRha2VBd2F5ID0gZGF0YVsndGFrZUF3YXknXSB8fCByZWZsZWN0aW9uLnRha2VBd2F5O1xuICAgIHRoaXMucmVmbGVjdGlvbnNbaW5kZXhdLm1vZGlmaWVkRGF0ZSA9IG1vbWVudC5ub3coKVxuICAgIHJldHVybiB0aGlzLnJlZmxlY3Rpb25zW2luZGV4XTtcbiAgfVxuXG4gIFxuIFxuICBcblxuICAvKipcbiAgICogXG4gICAqIEBwYXJhbSB7dXVpZH0gaWQgXG4gICAqL1xuXG4gICBcbiAgZGVsZXRlKGlkKSB7XG4gICAgY29uc3QgcmVmbGVjdGlvbiA9IHRoaXMuZmluZE9uZShpZCk7XG4gICAgY29uc3QgaW5kZXggPSB0aGlzLnJlZmxlY3Rpb25zLmluZGV4T2YocmVmbGVjdGlvbik7XG4gICAgdGhpcy5yZWZsZWN0aW9ucy5zcGxpY2UoaW5kZXgsIDEpO1xuICAgIHJldHVybiB7fTtcbiAgfVxufVxuZXhwb3J0IGRlZmF1bHQgbmV3IHVzZXIoKTsiXX0=